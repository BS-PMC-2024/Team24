<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SRS</title>

    {% load static %}
    <!-- Load jQuery from a CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Load Materialize CSS and FontAwesome from a CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <style>
      body,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "Raleway", sans-serif;
      }

      body,
      html {
        height: 100%;
        line-height: 1.8;
      }
      .pad-bot-10 {
        padding-bottom: 20px !important;
      }
      .card-panel {
        margin-left: auto;
        margin-right: auto;
        width: 95%;
      }
      .w3-bar .w3-button {
        padding: 16px;
      }
      .input-field {
        margin-bottom: 20px;
      }
      /* Custom button styles */
      .btn-custom {
        background-color: orange; /* Orange color */
        color: #fff; /* Text color */
        border-radius: 30px; /* Rounded buttons */
        font-family: "Comic Sans MS", cursive, sans-serif; /* Rounded font for buttons */
      }
      .btn-custom:hover {
        background-color: darkorange; /* Darker orange on hover */
        color: #fff; /* Text color on hover */
      }
      textarea.materialize-textarea {
        border-radius: 15px; /* More square textarea */
      }
      .orange-text {
        color: orange; /* Set text color to orange */
      }
      .page {
        display: none; /* Hide all pages by default */
      }
      /* Tooltip styles */
      .support-icon {
        position: fixed;
        bottom: 20px;
        right: 20px;
        cursor: pointer;
      }
      .tooltip {
        visibility: hidden;
        width: 100px;
        background-color: #555;
        color: #fff;
        text-align: center;
        border-radius: 5px;
        padding: 5px 0;
        position: absolute;
        z-index: 1;
        bottom: 125%; /* Position above the icon */
        right: 50%; /* Center the tooltip */
        margin-right: -50%; /* Offset the tooltip */
        opacity: 0;
        transition: opacity 0.3s;
      }
      .support-icon:hover .tooltip {
        visibility: visible;
        opacity: 1;
      }
      /* Request received popup styles */
      .request-received-popup {
        visibility: hidden; /* Initially hidden */
        opacity: 0; /* Start as invisible */
        transition: visibility 0s 0.3s, opacity 0.3s linear; /* Transition for visibility and opacity */
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        border: 2px solid orange;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 9999;
        text-align: center;
      }
      #supportFileLabel {
        margin-bottom: 20px; /* Adjust the value as needed */
      }
      /* Full height image header */
      .bgimg-1 {
        background-position: center;
        background-size: cover;
        background-image: url("{% static 'images/reqw2.png' %}");
        min-height: 100%;
      }
    </style>
  </head>
  <body>
    <!-- Navbar (sit on top) -->
    <div class="w3-top">
      <div class="w3-bar w3-white w3-card" id="myNavbar">
        <a href="{% url 'hometest' %}" class="w3-bar-item w3-button w3-wide"
          >ReqGenious</a
        >
        <!-- Right-sided navbar links -->
        <div class="w3-right w3-hide-small">
          <a href="#about" class="w3-bar-item w3-button">ABOUT</a>
          <a href="#team" class="w3-bar-item w3-button"
            ><i class="fa fa-user"></i> TEAM</a
          >
          <a href="{% url 'feedback' %}" class="w3-bar-item w3-button"
            ><i class="fa fa-th"></i> FEEDBACK</a
          >
          <a href="{% url 'login' %}" class="w3-bar-item w3-button"
            ><i class="fa fa-user"></i> LOGIN</a
          >
        </div>
        <!-- Hide right-floated links on small screens and replace them with a menu icon -->
        <a
          href="javascript:void(0)"
          class="w3-bar-item w3-button w3-right w3-hide-large w3-hide-medium"
          onclick="w3_open()"
        >
          <i class="fa fa-bars"></i>
        </a>
      </div>
    </div>

    <!-- Sidebar on small screens when clicking the menu icon -->
    <nav
      class="w3-sidebar w3-bar-block w3-black w3-card w3-animate-left w3-hide-medium w3-hide-large"
      style="display: none"
      id="mySidebar"
    >
      <a
        href="javascript:void(0)"
        onclick="w3_close()"
        class="w3-bar-item w3-button w3-large w3-padding-16"
        >Close Ã—</a
      >
      <a href="#about" onclick="w3_close()" class="w3-bar-item w3-button"
        >ABOUT</a
      >
      <a href="#team" onclick="w3_close()" class="w3-bar-item w3-button"
        >TEAM</a
      >
      <a href="#work" onclick="w3_close()" class="w3-bar-item w3-button"
        >WORK</a
      >
      <a href="#contact" onclick="w3_close()" class="w3-bar-item w3-button"
        >CONTACT</a
      >
    </nav>

    <main>
      <div class="container">
        <div class="row">
          <div class="section">
            <h1 class="center-align orange-text">SRS</h1>
            <h8 class="center-align grey-text"
              >Please fill in the following fields, and by clicking 'Submit',
              you will receive professional AI feedback</h8
            >
            <div class="section center-align">
              <a
                href="javascript:void(0)"
                class="btn btn-custom waves-effect waves-light tooltipped"
                data-tooltip="1. Purpose"
                onclick="showPage(1)"
                >1</a
              >
              <a
                href="javascript:void(0)"
                class="btn btn-custom waves-effect waves-light tooltipped"
                data-tooltip="2. Scope"
                onclick="showPage(2)"
                >2</a
              >
              <a
                href="javascript:void(0)"
                class="btn btn-custom waves-effect waves-light tooltipped"
                data-tooltip="3. Definitions"
                onclick="showPage(3)"
                >3</a
              >
              <a
                href="javascript:void(0)"
                class="btn btn-custom waves-effect waves-light tooltipped"
                data-tooltip="4. References"
                onclick="showPage(4)"
                >4</a
              >
              <a
                href="javascript:void(0)"
                class="btn btn-custom waves-effect waves-light tooltipped"
                data-tooltip="5. Overview"
                onclick="showPage(5)"
                >5</a
              >
            </div>
            <br />
            <h8 class="center-align grey-text">Choose a field</h8>
          </div>
        </div>

        <!-- Page sections -->
        <div id="page1" class="page">
          <div class="row valign-wrapper">
            <div class="card-panel">
              <div class="card-content grey-text text-darken-3">
                <div class="input-field">
                  <textarea
                    id="quoteInput1"
                    class="materialize-textarea"
                    rows="4"
                  ></textarea>
                  <label for="quoteInput1">1. Purpose</label>
                </div>
                <div class="section center-align">
                  <a
                    href="javascript:void(0)"
                    class="btn btn-custom waves-effect waves-light"
                    onclick="saveQuote(1)"
                    >Save</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="page2" class="page">
          <div class="row valign-wrapper">
            <div class="card-panel">
              <div class="card-content grey-text text-darken-3">
                <div class="input-field">
                  <textarea
                    id="quoteInput2"
                    class="materialize-textarea"
                    rows="4"
                  ></textarea>
                  <label for="quoteInput2">2. Scope</label>
                </div>
                <div class="section center-align">
                  <a
                    href="javascript:void(0)"
                    class="btn btn-custom waves-effect waves-light"
                    onclick="saveQuote(2)"
                    >Save</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="page3" class="page">
          <div class="row valign-wrapper">
            <div class="card-panel">
              <div class="card-content grey-text text-darken-3">
                <div class="input-field">
                  <textarea
                    id="quoteInput3"
                    class="materialize-textarea"
                    rows="4"
                  ></textarea>
                  <label for="quoteInput3"
                    >3. Definitions, Acronyms, and Abbreviations</label
                  >
                </div>
                <div class="section center-align">
                  <a
                    href="javascript:void(0)"
                    class="btn btn-custom waves-effect waves-light"
                    onclick="saveQuote(3)"
                    >Save</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="page4" class="page">
          <div class="row valign-wrapper">
            <div class="card-panel">
              <div class="card-content grey-text text-darken-3">
                <div class="input-field">
                  <textarea
                    id="quoteInput4"
                    class="materialize-textarea"
                    rows="4"
                  ></textarea>
                  <label for="quoteInput4">4. References</label>
                </div>
                <div class="section center-align">
                  <a
                    href="javascript:void(0)"
                    class="btn btn-custom waves-effect waves-light"
                    onclick="saveQuote(4)"
                    >Save</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="page5" class="page">
          <div class="row valign-wrapper">
            <div class="card-panel">
              <div class="card-content grey-text text-darken-3">
                <div class="input-field">
                  <textarea
                    id="quoteInput5"
                    class="materialize-textarea"
                    rows="4"
                  ></textarea>
                  <label for="quoteInput5">5. Overview</label>
                </div>
                <div class="section center-align">
                  <a
                    href="javascript:void(0)"
                    class="btn btn-custom waves-effect waves-light"
                    onclick="saveQuote(5)"
                    >Save</a
                  >
                  <a
                    href="javascript:void(0)"
                    class="btn btn-custom waves-effect waves-light"
                    onclick="openSupportModal()"
                    >Submit</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Support Center Icon with Tooltip -->
      <div class="support-icon">
        <i
          class="fas fa-headset"
          style="font-size: 30px"
          onclick="openSupportModal()"
        ></i>
        <span class="tooltip">Technical Support</span>
      </div>

      <!-- Support Request Modal -->
      <div id="supportModal" class="modal">
        <div class="modal-content">
          <h4>Support Request</h4>
          <div class="input-field">
            <input type="text" id="supportName" required />
            <label for="supportName"
              >Your Name <span style="color: red">*</span></label
            >
          </div>
          <div class="input-field">
            <input type="email" id="supportEmail" required />
            <label for="supportEmail"
              >Your Email <span style="color: red">*</span></label
            >
          </div>
          <div class="input-field">
            <textarea
              id="supportMessage"
              class="materialize-textarea"
              required
            ></textarea>
            <label for="supportMessage"
              >Your Message <span style="color: red">*</span></label
            >
          </div>
          <div class="input-field">
            <label id="supportFileLabel"
              >Attach a File <span style="color: red">*</span></label
            >
            <input type="file" id="supportFile" required />
          </div>
        </div>
        <div class="modal-footer">
          <a
            href="javascript:void(0)"
            class="btn btn-custom waves-effect waves-light"
            onclick="submitSupportRequest()"
            >Submit</a
          >
          <a
            href="javascript:void(0)"
            class="modal-close btn waves-effect waves-light"
            >Close</a
          >
        </div>
      </div>

      <!-- Request Received Popup -->
      <div id="requestReceivedPopup" class="request-received-popup">
        <h5>Request Received!</h5>
        <p>
          Thank you for your support request. We will get back to you shortly.
        </p>
      </div>
    </main>

    <!-- Load jQuery and Materialize JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
      $(document).ready(function () {
        $(".modal").modal();
        $(".tooltipped").tooltip(); // Initialize tooltips
        showPage(1); // Show the first page on load

        // Populate saved data when page loads
        var srsData = JSON.parse("{{ srs_data_json|safe }}");
        for (var i = 1; i <= 5; i++) {
          var content = srsData["field" + i] || "";
          $("#page" + i + " textarea").val(content);
          // Ensure labels don't overlap filled content
          if (content) {
            $("#page" + i + " label").addClass("active");
          }
        }
      });

      function showPage(pageNumber) {
        $(".page").hide(); // Hide all pages
        $("#page" + pageNumber).show(); // Show the selected page
      }

      function openSupportModal() {
        $("#supportModal").modal("open");
      }

      function closeSupportModal() {
        $("#supportModal").modal("close");
      }

      function submitSupportRequest() {
        var name = $("#supportName").val();
        var email = $("#supportEmail").val();
        var message = $("#supportMessage").val();
        var file = $("#supportFile").val();

        console.log("Support Request Submitted:", {
          name,
          email,
          message,
          file,
        });

        // Clear the input fields
        $("#supportName").val("");
        $("#supportEmail").val("");
        $("#supportMessage").val("");
        $("#supportFile").val("");

        // Close the support modal
        closeSupportModal();

        // Show request received popup
        $("#requestReceivedPopup").css({
          visibility: "visible",
          opacity: "1",
        });

        // Set a timeout to automatically hide the popup after 3 seconds
        setTimeout(closeRequestReceived, 3000);
      }

      function closeRequestReceived() {
        $("#requestReceivedPopup").css({
          visibility: "hidden",
          opacity: "0",
        });
      }
    </script>
  </body>
</html>
